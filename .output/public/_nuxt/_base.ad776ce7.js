import{E as v,G as z,H as y,I as j,J as x,K as S,L as M,M as W,j as P,g as w}from"./entry.81283b89.js";async function E(e,t){return await O(t).catch(i=>(console.error("Failed to get image meta for "+t,i+""),{width:0,height:0,ratio:0}))}async function O(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((t,r)=>{const i=new Image;i.onload=()=>{const n={width:i.width,height:i.height,ratio:i.width/i.height};t(n)},i.onerror=n=>r(n),i.src=e})}function J(e=""){return e.split(/[?#]/).shift().split("/").pop().split(".").pop()}function b(e){return t=>t?e[t]||t:e.missingValue}function q({formatter:e,keyMap:t,joinWith:r="/",valueMap:i}={}){e||(e=(s,o)=>`${s}=${o}`),t&&typeof t!="function"&&(t=b(t));const n=i||{};return Object.keys(n).forEach(s=>{typeof n[s]!="function"&&(n[s]=b(n[s]))}),(s={})=>Object.entries(s).filter(([d,f])=>typeof f<"u").map(([d,f])=>{const g=n[d];return typeof g=="function"&&(f=g(s[d])),d=typeof t=="function"?t(d):d,e(d,f)}).join(r)}function u(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return parseInt(e,10)}function N(e){const t={options:e},r=(n,s={})=>$(t,n,s),i=(n,s={},o={})=>r(n,{...o,modifiers:x(s,o.modifiers||{})}).url;for(const n in e.presets)i[n]=(s,o,d)=>i(s,o,{...e.presets[n],...d});return i.options=e,i.getImage=r,i.getMeta=(n,s)=>R(t,n,s),i.getSizes=(n,s)=>U(t,n,s),t.$img=i,i}async function R(e,t,r){const i=$(e,t,{...r});return typeof i.getMeta=="function"?await i.getMeta():await E(e,i.url)}function $(e,t,r){var g,l;if(typeof t!="string"||t==="")throw new TypeError(`input must be a string (received ${typeof t}: ${JSON.stringify(t)})`);if(t.startsWith("data:"))return{url:t};const{provider:i,defaults:n}=A(e,r.provider||e.options.provider),s=L(e,r.preset);if(t=v(t)?t:z(t),!i.supportsAlias)for(const a in e.options.alias)t.startsWith(a)&&(t=y(e.options.alias[a],t.substr(a.length)));if(i.validateDomains&&v(t)){const a=j(t).host;if(!e.options.domains.find(c=>c===a))return{url:t}}const o=x(r,s,n);o.modifiers={...o.modifiers};const d=o.modifiers.format;(g=o.modifiers)!=null&&g.width&&(o.modifiers.width=u(o.modifiers.width)),(l=o.modifiers)!=null&&l.height&&(o.modifiers.height=u(o.modifiers.height));const f=i.getImage(t,o,e);return f.format=f.format||d||"",f}function A(e,t){const r=e.options.providers[t];if(!r)throw new Error("Unknown provider: "+t);return r}function L(e,t){if(!t)return{};if(!e.options.presets[t])throw new Error("Unknown preset: "+t);return e.options.presets[t]}function U(e,t,r){var g,l;const i=u((g=r.modifiers)==null?void 0:g.width),n=u((l=r.modifiers)==null?void 0:l.height),s=i&&n?n/i:0,o=[],d={};if(typeof r.sizes=="string")for(const a of r.sizes.split(/[\s,]+/).filter(c=>c)){const c=a.split(":");c.length===2&&(d[c[0].trim()]=c[1].trim())}else Object.assign(d,r.sizes);for(const a in d){const c=e.options.screens&&e.options.screens[a]||parseInt(a);let h=String(d[a]);const p=h.endsWith("vw");if(!p&&/^\d+$/.test(h)&&(h=h+"px"),!p&&!h.endsWith("px"))continue;let m=parseInt(h);if(!c||!m)continue;p&&(m=Math.round(m/100*c));const _=s?Math.round(m*s):n;o.push({width:m,size:h,screenMaxWidth:c,media:`(max-width: ${c}px)`,src:e.$img(t,{...r.modifiers,width:m,height:_},r)})}o.sort((a,c)=>a.screenMaxWidth-c.screenMaxWidth);const f=o[o.length-1];return f&&(f.media=""),{sizes:o.map(a=>`${a.media?a.media+" ":""}${a.size}`).join(", "),srcset:o.map(a=>`${a.src} ${a.width}w`).join(", "),src:f==null?void 0:f.src}}const B=q({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,t)=>S(e)+"_"+S(t)}),F=(e,{modifiers:t={},baseURL:r}={},i)=>{t.width&&t.height&&(t.resize=`${t.width}x${t.height}`,delete t.width,delete t.height);const n=B(t)||"_";return r||(r=y(i.options.nuxt.baseURL,"/_ipx")),{url:y(r,n,M(e))}},G=!0,H=!0,T=Object.freeze(Object.defineProperty({__proto__:null,getImage:F,supportsAlias:H,validateDomains:G},Symbol.toStringTag,{value:"Module"})),I={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipx",domains:[],alias:{}};I.providers={ipx:{provider:T,defaults:void 0}};const C=()=>{const e=W(),t=P();return t.$img||t._img||(t._img=N({...I,nuxt:{baseURL:e.app.baseURL}}))},Q={src:{type:String,required:!0},format:{type:String,default:void 0},quality:{type:[Number,String],default:void 0},background:{type:String,default:void 0},fit:{type:String,default:void 0},modifiers:{type:Object,default:void 0},preset:{type:String,default:void 0},provider:{type:String,default:void 0},sizes:{type:[Object,String],default:void 0},preload:{type:Boolean,default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},alt:{type:String,default:void 0},referrerpolicy:{type:String,default:void 0},usemap:{type:String,default:void 0},longdesc:{type:String,default:void 0},ismap:{type:Boolean,default:void 0},loading:{type:String,default:void 0},crossorigin:{type:[Boolean,String],default:void 0,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,default:void 0,validator:e=>["async","auto","sync"].includes(e)}},X=e=>{const t=w(()=>({provider:e.provider,preset:e.preset})),r=w(()=>({width:u(e.width),height:u(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding})),i=w(()=>({...e.modifiers,width:u(e.width),height:u(e.height),format:e.format,quality:e.quality,background:e.background,fit:e.fit}));return{options:t,attrs:r,modifiers:i}};export{X as a,Q as b,J as g,u as p,C as u};
